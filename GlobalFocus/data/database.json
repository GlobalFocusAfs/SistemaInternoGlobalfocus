// Configuração da GitHub API
const REPO_OWNER = "seu-usuario-github";
const REPO_NAME = "GlobalFocus";
const DATA_FILE_PATH = "data/database.json";
const GITHUB_TOKEN = "seu-token-de-acesso"; // Crie um token em Settings > Developer Settings > Personal Access Tokens

async function fetchData() {
  const url = `https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/contents/${DATA_FILE_PATH}`;
  const response = await fetch(url, {
    headers: {
      "Authorization": `token ${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}`,
      "Accept": "application/vnd.github.v3+json"
    }
  });
  const data = await response.json();
  return JSON.parse(atob(data.content)); // Decodifica o base64
}

async function saveData(newData) {
  const url = `https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/contents/${DATA_FILE_PATH}`;
  const currentData = await fetchData();
  const response = await fetch(url, {
    method: "PUT",
    headers: {
      "Authorization": `token ${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}`,
      "Accept": "application/vnd.github.v3+json"
    },
    body: JSON.stringify({
      message: "Atualização do banco de dados",
      content: btoa(JSON.stringify(newData)), // Codifica para base64
      sha: currentData.sha // Necessário para atualizar o arquivo
    })
  });
  return response.json();
}
